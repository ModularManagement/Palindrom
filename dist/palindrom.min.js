/*! Palindrom, version: 5.2.0 */
var Palindrom=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});class r extends Error{constructor(e){super(e),this.message=e}}class o extends r{constructor(e,t,n=window.location.href,r){if(!t||!["Server","Client"].includes(t))throw new TypeError("Error constructing PalindromConnectionError, `side` parameter is required and can either be 'Server' or 'Client'");super(e),this.side=t,this.message=`${t} error\n\t${e.replace(/\n/g,"\n\t")}`,this.url=n,this.connectionType=r}}},function(e,t,n){var r=n(16),o=n(17);e.exports={JSONPatchQueue:r,JSONPatchQueueSynchronous:o,__esModule:!0}},function(e,t){e.exports=URL},function(e,t){var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=Object.prototype.hasOwnProperty;
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017 Joachim Wester
 * MIT license
 */function o(e,t){return r.call(e,t)}function i(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)o(e,r)&&t.push(r);return t}function s(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function a(e,t){var n;for(var r in e)if(o(e,r)){if(e[r]===t)return s(r)+"/";if("object"==typeof e[r]&&""!=(n=a(e[r],t)))return s(r)+"/"+n}return""}t.hasOwnProperty=o,t._objectKeys=i,t._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},t.isInteger=function(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0},t.escapePathComponent=s,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=a,t.getPath=function(e,t){if(e===t)return"/";var n=a(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0}else if("object"==typeof t){var o=i(t),s=o.length;for(n=0;n<s;n++)if(e(t[o[n]]))return!0}return!1};var h=function(e){function t(t,n,r,o,i){e.call(this,t),this.message=t,this.name=n,this.index=r,this.operation=o,this.tree=i}return n(t,e),t}(Error);t.PatchError=h},function(e,t){e.exports=WebSocket},function(e,t,n){n(6);var r=n(3),o=n(7),i=n(7);t.applyOperation=i.applyOperation,t.applyPatch=i.applyPatch,t.applyReducer=i.applyReducer,t.getValueByPointer=i.getValueByPointer,t.validate=i.validate,t.validator=i.validator;var s=n(3);t.JsonPatchError=s.PatchError,t.deepClone=s._deepClone,t.escapePathComponent=s.escapePathComponent,t.unescapePathComponent=s.unescapePathComponent;var a=new WeakMap,h=function(){return function(e){this.observers=new Map,this.obj=e}}(),c=function(){return function(e,t){this.callback=e,this.observer=t}}();function p(e){var t=a.get(e.object);u(t.value,e.object,e.patches,""),e.patches.length&&o.applyPatch(t.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function u(e,t,n,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=r._objectKeys(t),s=r._objectKeys(e),a=!1,h=s.length-1;h>=0;h--){var c=e[l=s[h]];if(!r.hasOwnProperty(t,l)||void 0===t[l]&&void 0!==c&&!1===Array.isArray(t))n.push({op:"remove",path:o+"/"+r.escapePathComponent(l)}),a=!0;else{var p=t[l];"object"==typeof c&&null!=c&&"object"==typeof p&&null!=p?u(c,p,n,o+"/"+r.escapePathComponent(l)):c!==p&&(!0,n.push({op:"replace",path:o+"/"+r.escapePathComponent(l),value:r._deepClone(p)}))}}if(a||i.length!=s.length)for(h=0;h<i.length;h++){var l=i[h];r.hasOwnProperty(e,l)||void 0===t[l]||n.push({op:"add",path:o+"/"+r.escapePathComponent(l),value:r._deepClone(t[l])})}}}t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var n,o=function(e){return a.get(e)}(e);if(o){var i=function(e,t){return e.observers.get(t)}(o,t);n=i&&i.observer}else o=new h(e),a.set(e,o);if(n)return n;if(n={},o.value=r._deepClone(e),t){n.callback=t,n.next=null;var s=function(){p(n)},u=function(){clearTimeout(n.next),n.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u)):(document.documentElement.attachEvent("onmouseup",u),document.documentElement.attachEvent("onkeyup",u),document.documentElement.attachEvent("onmousedown",u),document.documentElement.attachEvent("onkeydown",u),document.documentElement.attachEvent("onchange",u)))}return n.patches=[],n.object=e,n.unobserve=function(){p(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(o,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u)):(document.documentElement.detachEvent("onmouseup",u),document.documentElement.detachEvent("onkeyup",u),document.documentElement.detachEvent("onmousedown",u),document.documentElement.detachEvent("onkeydown",u)))},o.observers.set(t,new c(t,n)),n},t.generate=p,t.compare=function(e,t){var n=[];return u(e,t,n,""),n}},function(e,t,n){var r=Array.prototype.slice,o=n(14),i=n(15),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var c,p;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=r.call(e),t=r.call(t),s(e,t,n));if(h(e)){if(!h(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=o(e),l=o(t)}catch(e){return!1}if(u.length!=l.length)return!1;for(u.sort(),l.sort(),c=u.length-1;c>=0;c--)if(u[c]!=l[c])return!1;for(c=u.length-1;c>=0;c--)if(p=u[c],!s(e[p],t[p],n))return!1;return typeof e==typeof t}(e,t,n))};function a(e){return null==e}function h(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},function(e,t,n){var r={strict:!0},o=n(6),i=function(e,t){return o(e,t,r)},s=n(3);t.JsonPatchError=s.PatchError,t.deepClone=s._deepClone;var a={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=c(n,this.path);r&&(r=s._deepClone(r));var o=p(n,{op:"remove",path:this.from}).removed;return p(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=c(n,this.from);return p(n,{op:"add",path:this.path,value:s._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:i(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},h={add:function(e,t,n){return s.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:a.move,copy:a.copy,test:a.test,_get:a._get};function c(e,t){if(""==t)return e;var n={op:"_get",path:t};return p(e,n),n.value}function p(e,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!0),r&&("function"==typeof r?r(n,0,e,n.path):l(n,0)),""===n.path){var p={newDocument:e};if("add"===n.op)return p.newDocument=n.value,p;if("replace"===n.op)return p.newDocument=n.value,p.removed=e,p;if("move"===n.op||"copy"===n.op)return p.newDocument=c(e,n.from),"move"===n.op&&(p.removed=e),p;if("test"===n.op){if(p.test=i(e,n.value),!1===p.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return p.newDocument=e,p}if("remove"===n.op)return p.removed=e,p.newDocument=null,p;if("_get"===n.op)return n.value=e,p;if(r)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",0,n,e);return p}o||(e=s._deepClone(e));var u=(n.path||"").split("/"),f=e,d=1,v=u.length,y=void 0,w=void 0,b=void 0;for(b="function"==typeof r?r:l;;){if(w=u[d],r&&void 0===y&&(void 0===f[w]?y=u.slice(0,d).join("/"):d==v-1&&(y=n.path),void 0!==y&&b(n,0,e,y)),d++,Array.isArray(f)){if("-"===w)w=f.length;else{if(r&&!s.isInteger(w))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",0,n.path,n);s.isInteger(w)&&(w=~~w)}if(d>=v){if(r&&"add"===n.op&&w>f.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",0,n.path,n);if(!1===(p=h[n.op].call(n,f,w,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return p}}else if(w&&-1!=w.indexOf("~")&&(w=s.unescapePathComponent(w)),d>=v){if(!1===(p=a[n.op].call(n,f,w,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return p}f=f[w]}}function u(e,n,r,o){if(void 0===o&&(o=!0),r&&!Array.isArray(n))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(e=s._deepClone(e));for(var i=new Array(n.length),a=0,h=n.length;a<h;a++)i[a]=p(e,n[a],r),e=i[a].newDocument;return i.newDocument=e,i}function l(e,n,r,o){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,r);if(!a[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,r);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&s.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,r);if(r)if("add"==e.op){var i=e.path.split("/").length,h=o.split("/").length;if(i!==h+1&&i!==h)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,r)}else if("move"===e.op||"copy"===e.op){var c=f([{op:"_get",path:e.from,value:void 0}],r);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,r)}}function f(e,n,r){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)u(s._deepClone(n),s._deepClone(e),r||!0);else{r=r||l;for(var o=0;o<e.length;o++)r(e[o],o,n,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}t.getValueByPointer=c,t.applyOperation=p,t.applyPatch=u,t.applyReducer=function(e,n){var r=p(e,n);if(!1===r.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return r.newDocument},t.validator=l,t.validate=f},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var r=n(2),o=n.n(r),i=n(0),s=n(4),a=n.n(s),h=n(9),c=n.n(h);const p="Client",u="Server";function l(e){return e.replace(/^http/i,"ws")}class f{constructor(e,t,n,r,i,s,a,h,c){this.palindrom=e,"undefined"!=typeof window&&window.location?this.remoteUrl=new o.a(t,window.location.href):this.remoteUrl=new o.a(t),r&&(this.onReceive=r),i&&(this.onSend=i),s&&(this.onConnectionError=s),h&&(this.onFatalError=h),c&&(this.onStateChange=c),a&&(this.onSocketOpened=a),Object.defineProperty(this,"useWebSocket",{get:function(){return n},set:e=>(n=e,0==e?this._ws&&(this._ws.onclose=function(){this._ws=null},this._ws.close()):this.wsUrl||(this.wsUrl=l(this.remoteUrl.href)),n)})}get useWebSocket(){return this._useWebSocket}set useWebSocket(e){return this._useWebSocket=e,0==e?this._ws&&(this._ws.onclose=(()=>{this._ws=null}),this._ws.close()):this.wsUrl||(this.wsUrl=l(this.remoteUrl.href)),this.useWebSocket}async _establish(e=null){const t=await this._xhr(this.remoteUrl.href+(e?"/reconnect":""),"application/json",e);return this.useWebSocket&&this.webSocketUpgrade(this.onSocketOpened),t}async send(e){if(this.useWebSocket&&this._ws&&1===this._ws.readyState)this._ws.send(e),this.onSend({data:e,url:this._ws.url,method:"WS"});else{const t=this.remoteUrl.href,n=await this._xhr(t,"application/json-patch+json",e);this.onReceive(n,t,"GET")}return this}onReceive(){}onSend(){}onStateChange(){}upgrade(e){}webSocketUpgrade(e){this.wsUrl=l(this.remoteUrl.href);const t=this.wsUrl;this.closeConnection(this);const n=a.a.w3cwebsocket||a.a;this._ws=new n(t),this._ws.onopen=(n=>{this.onStateChange(this._ws.readyState,t),e&&e(n)}),this._ws.onmessage=(e=>{try{var t=JSON.parse(e.data)}catch(t){return void this.onFatalError(new i.a(e.data,u,this._ws.url,"WS"))}this.onReceive(t,this._ws.url,"WS")}),this._ws.onerror=(e=>{if(this.onStateChange(this._ws.readyState,t,e.data),!this.useWebSocket)return;const n=["WebSocket connection could not be made","readyState: "+this._ws.readyState].join("\n");this.onFatalError(new i.a(n,p,t,"WS"))}),this._ws.onclose=(e=>{this.onStateChange(this._ws.readyState,t,null,e.code,e.reason);const n=["WebSocket connection closed unexpectedly.","reason: "+e.reason,"readyState: "+this._ws.readyState,"stateCode: "+e.code].join("\n");e.reason?this.onFatalError(new i.a(n,u,t,"WS")):e.wasClean||this.onConnectionError(new i.a(n,u,t,"WS"))})}closeConnection(){this._ws&&(this._ws.onclose=(()=>{}),this._ws.close(),this._ws=null)}async getPatchUsingHTTP(e){const t=await this._xhr(e,"application/json-patch+json",null,!0);return this.onReceive(t,e,"GET"),t}_setRemoteUrl(e){if(this.remoteUrlSet&&this.remoteUrl&&this.remoteUrl!=e){const t=["Session lost.","Server replied with a different session ID than the already set one.","Possibly a server restart happened while you were working.","Please reload the page.","Previous session ID: "+this.remoteUrl,"New session ID: "+e].join("\n");throw new i.b(t)}this.remoteUrlSet=!0,this.remoteUrl=new o.a(e,this.remoteUrl.href)}_handleLocationHeader(e){const t=e.headers&&(e.headers.get("x-location")||e.headers.get("location"));t&&this._setRemoteUrl(t)}async _handleFailureResponse(e,t,n){var r=`An unknown network error has occurred. Raw message: ${n.message}`;console.error(n);const o=[r,"statusCode: -1","reason: Maybe you lost connection with the server","url: "+e,"HTTP method: "+t].join("\n");this.onFatalError(new i.a(o,p,e,t))}async _xhr(t,n,r,o){const i=r?"PATCH":"GET",s={headers:{},method:i,credentials:"include"},a=s.headers;r&&(a["Content-Type"]="application/json-patch+json",s.body=JSON.stringify(r)),n&&(a.Accept=n),this.remoteUrl&&o&&(a["X-Referer"]=this.remoteUrl.pathname),this.onSend({data:r,url:t,method:i});let h=void 0!==e?e.fetch:c.a;const p=await h(t,s);return p.json().then(e=>{if(p.status<500)return this._handleLocationHeader(p),e;throw new Error(`HTTP ${p.status} response: response body is ${JSON.stringify(e)}`)}).catch(e=>{throw this._handleFailureResponse(t,i,e),e})}}}).call(this,n(13))},function(e,t){e.exports=null},function(e,t,n){"use strict";
/*!
 * https://github.com/Palindrom/JSONPatcherProxy
 * (c) 2017 Starcounter 
 * MIT license
 */const r=function(){function e(e){return-1==e.indexOf("/")&&-1==e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function t(e,t){const n=[];let r=e.parenthoodMap.get(t);for(;r&&r.path;)n.unshift(r.path),r=e.parenthoodMap.get(r.parent);if(n.length){return"/"+n.join("/")}return""}function n(e,t){this.isProxifyingTreeNow=!1,this.isObserving=!1,this.proxifiedObjectsMap=new Map,this.parenthoodMap=new Map,"boolean"!=typeof t&&(t=!0),this.showDetachedWarning=t,this.originalObject=e,this.cachedProxy=null,this.isRecording=!1,this.userCallback,this.resume=function(){this.defaultCallback=(e=>{this.isRecording&&this.patches.push(e),this.userCallback&&this.userCallback(e)}),this.isObserving=!0}.bind(this),this.pause=function(){this.defaultCallback=(()=>{}),this.isObserving=!1}.bind(this)}return n.deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},n.escapePathComponent=e,n.prototype.generateProxyAtPath=function(n,r,o){if(!r)return r;const i={set:(n,r,o,i)=>(function(n,r,o,i){const s=t(n,r)+"/"+e(o);if(n.proxifiedObjectsMap.has(i)){const e=n.proxifiedObjectsMap.get(i);n.parenthoodMap.set(e.originalObject,{parent:r,path:o})}const a=n.proxifiedObjectsMap.get(i);a&&!n.isProxifyingTreeNow&&(a.inherited=!0),i&&"object"==typeof i&&!n.proxifiedObjectsMap.has(i)&&(n.parenthoodMap.set(i,{parent:r,path:o}),i=n._proxifyObjectTreeRecursively(r,i,o));const h={op:"remove",path:s};if(void 0===i){if(!Array.isArray(r)&&!r.hasOwnProperty(o))return Reflect.set(r,o,i);{Array.isArray(r)&&(h.op="replace",h.value=null);const e=n.proxifiedObjectsMap.get(r[o]);e&&(n.parenthoodMap.delete(r[o]),n.disableTrapsForProxy(e),n.proxifiedObjectsMap.delete(e))}}else{if(Array.isArray(r)&&!Number.isInteger(+o.toString()))return"length"!=o&&console.warn("JSONPatcherProxy noticed a non-integer prop was set for an array. This will not emit a patch"),Reflect.set(r,o,i);h.op="add",r.hasOwnProperty(o)&&(void 0!==r[o]||Array.isArray(r))&&(h.op="replace"),h.value=i}const c=Reflect.set(r,o,i);return n.defaultCallback(h),c})(this,n,r,o),deleteProperty:(n,r)=>(function(n,r,o){if(void 0!==r[o]){const i=t(n,r)+"/"+e(o),s=n.proxifiedObjectsMap.get(r[o]);s&&(s.inherited?s.inherited=!1:(n.parenthoodMap.delete(s.originalObject),n.disableTrapsForProxy(s),n.proxifiedObjectsMap.delete(r[o])));const a=Reflect.deleteProperty(r,o);return n.defaultCallback({op:"remove",path:i}),a}})(this,n,r)},s=Proxy.revocable(r,i);return s.trapsInstance=i,s.originalObject=r,this.parenthoodMap.set(r,{parent:n,path:o}),this.proxifiedObjectsMap.set(s.proxy,s),s.proxy},n.prototype._proxifyObjectTreeRecursively=function(t,n,r){for(let t in n)n.hasOwnProperty(t)&&n[t]instanceof Object&&(n[t]=this._proxifyObjectTreeRecursively(n,n[t],e(t)));return this.generateProxyAtPath(t,n,r)},n.prototype.proxifyObjectTree=function(e){this.pause(),this.isProxifyingTreeNow=!0;const t=this._proxifyObjectTreeRecursively(void 0,e,"");return this.isProxifyingTreeNow=!1,this.resume(),t},n.prototype.disableTrapsForProxy=function(e){if(this.showDetachedWarning){const t="You're accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects";e.trapsInstance.set=((e,n,r)=>(console.warn(t),Reflect.set(e,n,r))),e.trapsInstance.set=((e,n,r)=>(console.warn(t),Reflect.set(e,n,r))),e.trapsInstance.deleteProperty=((e,t)=>Reflect.deleteProperty(e,t))}else delete e.trapsInstance.set,delete e.trapsInstance.get,delete e.trapsInstance.deleteProperty},n.prototype.observe=function(e,t){if(!e&&!t)throw new Error("You need to either record changes or pass a callback");return this.isRecording=e,this.userCallback=t,e&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(this.originalObject),this.cachedProxy},n.prototype.generate=function(){if(!this.isRecording)throw new Error("You should set record to true to get patches later");return this.patches.splice(0,this.patches.length)},n.prototype.revoke=function(){this.proxifiedObjectsMap.forEach(e=>{e.revoke()})},n.prototype.disableTraps=function(){this.proxifiedObjectsMap.forEach(this.disableTrapsForProxy,this)},n}();e.exports=r,e.exports.default=r},function(e,t,n){
/*!
 * https://github.com/Palindrom/JSONPatchOT
 * JSON-Patch-OT version: 1.0.1
 * (c) 2017 Tomek Wytrebowicz
 * MIT license
 */
var r=function(){var e=e||{};e.transform=function(e,n){var r=[];r=r.concat.apply(r,n);var o=JSON.parse(JSON.stringify(e));return r.reduce(t,o)},e.transformAgainstSingleOp=function(e,t){};var t=function(e,t){if(void 0===t.value&&("add"===t.op||"replace"===t.op||"test"===t.op))throw new Error("'value' MUST be defined");if(void 0===t.from&&("copy"===t.op||"move"===t.op))throw new Error("'from' MUST be defined");if(n[t.op])if("function"==typeof n[t.op])n[t.op](t,e);else for(var r=e.length,o=0;o<r;){var i=e[o];o++,n[t.op][i.op]&&n[t.op][i.op](t,i)}return e},n={remove:function(e,t){for(var n,i=t.length,s=0;n=t[s];)("add"!==n.op&&"test"!==n.op||e.path!==n.path)&&(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||e.path===n.path||0===n.path.indexOf(e.path+"/"))&&(t.splice(s,1),i--,s--),s++;var a=e.path.lastIndexOf("/");if(a>-1){var h=e.path.substr(a+1),c=e.path.substr(0,a+1);if(o(h))for(i=t.length,s=0;s<i;)n=t[s],s++,0===n.path.indexOf(c)&&(n.path=r(n.path,c,h)),n.from&&0===n.from.indexOf(c)&&(n.from=r(n.from,c,h))}},replace:function(e,t){for(var n,r=0;n=t[r];)(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||0===n.path.indexOf(e.path+"/"))&&(t.splice(r,1),r--),r++}};function r(e,t,n){var r=e.substr(t.length),i=r.indexOf("/");i>-1||(i=r.length);var s=r.substr(0,i),a=r.substr(i);return o(s)&&s>n?t+(s-1)+a:e}function o(e){var t=~~Number(e);return String(t)===e&&t>=0}return e}();e.exports=r,e.exports.default=r,e.exports.__esModule=!0},function(e,t,n){if(void 0===r)var r=n(1).JSONPatchQueue;var o=function(e,t,n,o,i){r.call(this,e,n,o,i),this.transform=t,this.pending=[]};(o.prototype=Object.create(r.prototype)).constructor=o,o.prototype.ackLocalVersion=0,o.prototype.send=function(e){var t=e.slice(0);t.unshift({op:"test",path:this.remotePath,value:this.remoteVersion});var n=r.prototype.send.call(this,t);return this.pending.push(n),n},o.prototype.receive=function(e,t){var n=t||this.apply,o=this;return r.prototype.receive.call(this,e,function(e,t){var r=t.slice(0),i=r.shift().value,s=i-o.ackLocalVersion;return o.ackLocalVersion=i,o.pending.splice(0,s),o.pending.length&&(r=o.transform(r,o.pending)),o.obj=n(o.obj,r)})},o.prototype.reset=function(e){return this.ackLocalVersion=r.getPropertyByJsonPointer(e,this.localPath),this.pending=[],this.obj=r.prototype.reset.call(this,e)},e.exports=o,e.exports.default=o,e.exports.__esModule=!0},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:o).supported=r,t.unsupported=o},function(e,t,n){var r=function(e,t,n,r){this.obj=e,this.waiting=[],this.localPath=t[0],this.remotePath=t[1],this.apply=n,this.purist=r};r.prototype.localVersion=0,r.prototype.remoteVersion=0,r.prototype.receive=function(e,t){var n=t||this.apply,r=e.slice(0);if(this.purist)r.shift();var o=r.shift().value;if(o<=this.remoteVersion)throw new Error("Given version was already applied.");if(o==this.remoteVersion+1)for(;r;)this.remoteVersion++,this.obj=n(this.obj,r),r=this.waiting.shift();else this.waiting[o-this.remoteVersion-2]=r},r.prototype.send=function(e){this.localVersion++;var t=e.slice(0);return this.purist?t.unshift({op:"test",path:this.localPath,value:this.localVersion-1},{op:"replace",path:this.localPath,value:this.localVersion}):t.unshift({op:"replace",path:this.localPath,value:this.localVersion}),t},r.getPropertyByJsonPointer=function(e,t){var n=t.split("/");""===n[0]&&n.shift();for(var r=e;n.length;){var o=n.shift().replace("~1","/").replace("~0","~");n.length&&(r=r[o])}return r[o]},r.prototype.reset=function(e){this.remoteVersion=r.getPropertyByJsonPointer(e,this.remotePath),this.waiting=[];var t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)},e.exports=r,e.exports.default=r,e.exports.__esModule=!0},function(e,t,n){var r=function(e,t,n,r){this.obj=e,this.waiting=[],this.versionPath=t,this.apply=n,this.purist=r};r.prototype.version=0,r.prototype.receive=function(e,t){var n=t||this.apply,r=e.slice(0);if(this.purist)r.shift();var o=r.shift().value;if(o<=this.version)throw new Error("Given version was already applied.");if(o==this.version+1)for(;r;)this.version++,this.obj=n(this.obj,r),r=this.waiting.shift();else this.waiting[o-this.version-2]=r},r.prototype.send=function(e){this.version++;var t=e.slice(0);return t.unshift({op:"replace",path:this.versionPath,value:this.version}),this.purist&&t.unshift({op:"test",path:this.versionPath,value:this.version-1}),t},r.getPropertyByJsonPointer=function(e,t){var n=t.split("/");""===n[0]&&n.shift();for(var r=e;n.length;){var o=n.shift().replace("~1","/").replace("~0","~");n.length&&(r=r[o])}return r[o]},r.prototype.reset=function(e){this.version=r.getPropertyByJsonPointer(e,this.versionPath),this.waiting=[];var t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)},e.exports=r,e.exports.default=r,e.exports.__esModule=!0},function(e,t,n){"use strict";n.r(t);var r=n(8),o=n(5),i=n(10),s=n.n(i),a=n(1),h=n(11),c=n.n(h),p=n(12),u=n.n(p);n(0);function l(e,t,n){let r,o,i,s;const a=1e3;function h(){r=a,o=0,i=!1,clearTimeout(s),s=null}const c=()=>{0==o?(t(0),i=!1,r*=2,e()):(t(o),o-=1e3,setTimeout(c,1e3))};this.triggerReconnection=(()=>{i||(o=r,i=!0,c())}),this.reconnectNow=(()=>{o=0,r=a}),this.stopReconnecting=(()=>{h(),n()}),h()}
/*! Palindrom
 * https://github.com/Palindrom/Palindrom
 * (c) 2019 Omar Alsahker
 * MIT license
 */const f=Symbol("listeners");class d{constructor(){this[f]={}}addEventListener(e,t){this[f][e]||(this[f][e]=new Set),this[f][e].add(t)}removeListener(e,t){this[f][e]&&this[f][e].remove(t)}fire(e,t){this[f][e]&&this[f][e].forEach(e=>e({detail:t}))}}function v(e,t,n,r){let o,i;this.start=function(){o||(o=setTimeout(()=>{this.notifySend(),e()},n))},this.notifySend=function(){clearTimeout(o),o=null,i||(i=setTimeout(()=>{i=null,t(new PalindromConnectionError("Timeout has passed and response hasn't arrived",CLIENT,this.remoteUrl,"Unknown"))},r))},this.notifyReceive=function(){clearTimeout(i),i=null,this.start()},this.stop=(()=>{clearTimeout(o),o=null,clearTimeout(i),i=null})}function y(){this.start=this.stop=this.notifySend=this.notifyReceive=(()=>{})}class w{constructor(e,t){this.obj=e,this.apply=t}send(e){return e}receive(e){return this.obj=this.apply(this.obj,e)}reset(e){const t=[{op:"replace",path:"",value:e}];return this.obj=this.apply(this.obj,t)}}n.d(t,"default",function(){return g});
/*! Palindrom
 * https://github.com/Palindrom/Palindrom
 * (c) 2017 Joachim Wester
 * MIT license
 */
const b="6.0.1";if(void 0===m)if("undefined"!=typeof window)var m=window;else m={};class g extends d{static get version(){return b}constructor(e){if(super(),this.version=b,"object"!=typeof e)throw new TypeError("Palindrom constructor requires an object argument.");if(!e.remoteUrl)throw new TypeError("remoteUrl is required");if(this.debug=null==e.debug||e.debug,this.isObserving=!1,this.filterLocalChange=e.filterLocalChange||(e=>e),this.onPatchSent=(e=>this.fire("patch-sent",e)),this.onSocketStateChanged=(e=>this.fire("socket-state-changed",e)),this.onConnectionError=(e=>this.fire("connection-error",e)),this.onReconnectionCountdown=(e=>this.fire("reconnection-countdown",e)),this.onReconnectionEnd=(e=>this.fire("reconnection-end",e)),this.onSocketOpened=(e=>this.fire("socket-opened",e)),this.onIncomingPatchValidationError=(e=>this.fire("incoming-patch-validation-error",e)),this.onError=(e=>this.fire("error",e)),this.onOutgoingPatchValidationError=(e=>this.fire("outgoing-patch-validation-error",e)),this.retransmissionThreshold=e.retransmissionThreshold||3,this.reconnector=new l(()=>this._connectToRemote(JSON.stringify(this.queue.pending)),this.onReconnectionCountdown,this.onReconnectionEnd),e.pingIntervalS){const t=1e3*e.pingIntervalS;this.heartbeat=new v(this.ping.bind(this),this.handleConnectionError.bind(this),t,t)}else this.heartbeat=new y;this.network=new r.a(this,e.remoteUrl,e.useWebSocket||!1,this.handleRemoteChange.bind(this),this.onPatchSent.bind(this),this.handleConnectionError.bind(this),this.onSocketOpened.bind(this),this.handleFatalError.bind(this),this.onSocketStateChanged.bind(this)),this.OTPatchIndexOffset=0,e.localVersionPath?e.remoteVersionPath?(this.OTPatchIndexOffset=2,e.ot?this.queue=new u.a(this.obj,c.a.transform,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):this.queue=new a.JSONPatchQueue(this.obj,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity)):(this.OTPatchIndexOffset=1,this.queue=new a.JSONPatchQueueSynchronous(this.obj,e.localVersionPath,this.validateAndApplySequence.bind(this),e.purity)):this.queue=new w(this.obj,this.validateAndApplySequence.bind(this)),this._connectToRemote()}async _connectToRemote(e=null){this.heartbeat.stop();const t=await this.network._establish(e);this.reconnector.stopReconnecting(),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(t))),this.queue.reset(t),this.heartbeat.start()}get useWebSocket(){return this.network.useWebSocket}set useWebSocket(e){this.network.useWebSocket=e}ping(){this._sendPatches(this,[])}_sendPatches(e){const t=JSON.stringify(e);this.unobserve(),this.heartbeat.notifySend(),this.network.send(t),this.observe()}closeConnection(){this.network.closeConnection()}prepareProxifiedObject(e){e||(e={}),this.jsonPatcherProxy=new s.a(e);const t=this.jsonPatcherProxy.observe(!1,e=>{const t=this.filterLocalChange(e);t&&this.handleLocalChange(t)});Object.defineProperty(this,"obj",{get:()=>t,set(){throw new Error("palindrom.obj is readonly")},configurable:!0}),this.isObserving=!0}observe(){this.jsonPatcherProxy&&this.jsonPatcherProxy.resume(),this.isObserving=!0}unobserve(){this.jsonPatcherProxy&&this.jsonPatcherProxy.pause(),this.isObserving=!1}handleLocalChange(e){e.value&&P(e.value,this.onOutgoingPatchValidationError,e.path);const t=[e];this.debug&&this.validateSequence(this.remoteObj,t),this._sendPatches(this.queue.send(t)),this.fire("local-change",t)}validateAndApplySequence(e,t){try{this.unobserve();const n=Object(o.applyPatch)(e,t,this.debug);this.observe(),n.newDocument!==e&&(this.prepareProxifiedObject(n.newDocument),this.queue.obj=this.obj,P(this.obj,this.onIncomingPatchValidationError),this.fire("state-reset",this.obj)),this.fire("remote-change",{patches:t,results:n})}catch(e){if(this.debug)return void this.onIncomingPatchValidationError(e);throw e}return this.obj}validateSequence(e,t){const n=Object(o.validate)(t,e);n&&this.onOutgoingPatchValidationError(n)}handleConnectionError(){this.heartbeat.stop(),this.reconnector.triggerReconnection()}handleFatalError(e){this.heartbeat.stop(),this.reconnector.stopReconnecting(),this.onConnectionError&&this.onConnectionError(e)}reconnectNow(){this.reconnector.reconnectNow()}handleRemoteChange(e,t,n){this.fire("patch-received",{data:e,url:t,method:n}),this.heartbeat.notifyReceive();const r=e||[];!function(e,t,n){for(let r=n,o=e.length;r<o;r++)P(e[r].value,t,e[r].path)}(r,this.onIncomingPatchValidationError,this.OTPatchIndexOffset),0!==r.length&&this.isObserving&&(this.queue.receive(r),this.queue.pending&&this.queue.pending.length&&this.queue.pending.length>this.retransmissionThreshold&&this.queue.pending.forEach(this._sendPatches,this),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(this.obj))))}}function P(e,t,n=""){const r=typeof e;if("object"==r)for(const r in e)e.hasOwnProperty(r)&&P(e[r],t,n+"/"+r);else"number"===r&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&t(new RangeError(`A number that is either bigger than Number.MAX_INTEGER_VALUE or smaller than Number.MIN_INTEGER_VALUE has been encountered in a patch, value is: ${e}, variable path is: ${n}`))}}]).default;