/*! Palindrom, version: 3.0.0 */
var Palindrom=function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=41)}([function(e,t,o){'use strict';function n(e){return'[object Array]'===d.call(e)}function r(e){return null!==e&&'object'==typeof e}function a(e){return'[object Function]'===d.call(e)}function s(e,t){if(null!==e&&'undefined'!=typeof e)if('object'==typeof e||n(e)||(e=[e]),n(e))for(var o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function p(){function e(e,o){t[o]='object'==typeof t[o]&&'object'==typeof e?p(t[o],e):e}for(var t={},o=0,n=arguments.length;o<n;o++)s(arguments[o],e);return t}var i=o(8),d=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:function(e){return'[object ArrayBuffer]'===d.call(e)},isFormData:function(e){return'undefined'!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){var t;return t='undefined'!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t},isString:function(e){return'string'==typeof e},isNumber:function(e){return'number'==typeof e},isObject:r,isUndefined:function(e){return'undefined'==typeof e},isDate:function(e){return'[object Date]'===d.call(e)},isFile:function(e){return'[object File]'===d.call(e)},isBlob:function(e){return'[object Blob]'===d.call(e)},isFunction:a,isStream:function(e){return r(e)&&a(e.pipe)},isURLSearchParams:function(e){return'undefined'!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return'undefined'!=typeof window&&'undefined'!=typeof document&&'function'==typeof document.createElement},forEach:s,merge:p,extend:function(e,t,o){return s(t,function(t,n){e[n]=o&&'function'==typeof t?i(t,o):t}),e},trim:function(e){return e.replace(/^\s*/,'').replace(/\s*$/,'')}}},function(e,t,o){var n=o(40),r=o(39);e.exports={JSONPatchQueue:n,JSONPatchQueueSynchronous:r,__esModule:!0}},function(e,t,o){'use strict';(function(t){function n(e,t){!r.isUndefined(e)&&r.isUndefined(e['Content-Type'])&&(e['Content-Type']=t)}var r=o(0),a=o(34),s=/^\)\]\}',?\n/,p={"Content-Type":'application/x-www-form-urlencoded'},i={adapter:function(){var e;return'undefined'==typeof XMLHttpRequest?'undefined'!=typeof t&&(e=o(4)):e=o(4),e}(),transformRequest:[function(e,t){return a(t,'Content-Type'),r.isFormData(e)||r.isArrayBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(n(t,'application/x-www-form-urlencoded;charset=utf-8'),e.toString()):r.isObject(e)?(n(t,'application/json;charset=utf-8'),JSON.stringify(e)):e}],transformResponse:[function(e){if('string'==typeof e){e=e.replace(s,'');try{e=JSON.parse(e)}catch(t){}}return e}],timeout:0,xsrfCookieName:'XSRF-TOKEN',xsrfHeaderName:'X-XSRF-TOKEN',maxContentLength:-1,validateStatus:function(e){return 200<=e&&300>e}};i.headers={common:{Accept:'application/json, text/plain, */*'}},r.forEach(['delete','get','head'],function(e){i.headers[e]={}}),r.forEach(['post','put','patch'],function(e){i.headers[e]=r.merge(p)}),e.exports=i}).call(t,o(11))},function(e,t){function o(e,t){return i.call(e,t)}function n(e){if(Array.isArray(e)){for(var t=Array(e.length),n=0;n<t.length;n++)t[n]=''+n;return t}if(Object.keys)return Object.keys(e);var t=[];for(var r in e)o(e,r)&&t.push(r);return t}function r(e){return-1===e.indexOf('/')&&-1===e.indexOf('~')?e:e.replace(/~/g,'~0').replace(/\//g,'~1')}function a(e,t){var n;for(var s in e)if(o(e,s)){if(e[s]===t)return r(s)+'/';if('object'==typeof e[s]&&(n=a(e[s],t),''!=n))return r(s)+'/'+n}return''}function s(e){if(e===void 0)return!0;if(e)if(Array.isArray(e)){for(var t=0,o=e.length;t<o;t++)if(s(e[t]))return!0;}else if('object'==typeof e)for(var r=n(e),a=r.length,t=0;t<a;t++)if(s(e[r[t]]))return!0;return!1}var p=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},i=Object.prototype.hasOwnProperty;t.hasOwnProperty=o,t._objectKeys=n;t._deepClone=function(e){switch(typeof e){case'object':return JSON.parse(JSON.stringify(e));case'undefined':return null;default:return e;}},t.isInteger=function(e){for(var t,o=0,n=e.length;o<n;){if(t=e.charCodeAt(o),48<=t&&57>=t){o++;continue}return!1}return!0},t.escapePathComponent=r,t.unescapePathComponent=function(e){return e.replace(/~1/g,'/').replace(/~0/g,'~')},t._getPathRecursive=a,t.getPath=function(e,t){if(e===t)return'/';var o=a(e,t);if(''===o)throw new Error('Object not found in root');return'/'+o},t.hasUndefined=s;var d=function(e){function t(t,o,n,r,a){e.call(this,t),this.message=t,this.name=o,this.index=n,this.operation=r,this.tree=a}return p(t,e),t}(Error);t.PatchError=d},function(e,t,o){'use strict';(function(t){var n=o(0),r=o(26),a=o(29),s=o(35),p=o(33),i=o(7),d='undefined'!=typeof window&&window.btoa&&window.btoa.bind(window)||o(28);e.exports=function(e){return new Promise(function(l,c){var h=e.data,u=e.headers;n.isFormData(h)&&delete u['Content-Type'];var f=new XMLHttpRequest,m='onreadystatechange',y=!1;if('test'===t.env.NODE_ENV||'undefined'==typeof window||!window.XDomainRequest||'withCredentials'in f||p(e.url)||(f=new window.XDomainRequest,m='onload',y=!0,f.onprogress=function(){},f.ontimeout=function(){}),e.auth){var g=e.auth.username||'',b=e.auth.password||'';u.Authorization='Basic '+d(g+':'+b)}if(f.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f[m]=function(){if(f&&(4===f.readyState||y)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf('file:'))){var t='getAllResponseHeaders'in f?s(f.getAllResponseHeaders()):null,o=e.responseType&&'text'!==e.responseType?f.response:f.responseText,n={data:o,status:1223===f.status?204:f.status,statusText:1223===f.status?'No Content':f.statusText,headers:t,config:e,request:f};r(l,c,n),f=null}},f.onerror=function(){c(i('Network Error',e)),f=null},f.ontimeout=function(){c(i('timeout of '+e.timeout+'ms exceeded',e,'ECONNABORTED')),f=null},n.isStandardBrowserEnv()){var v=o(31),P=(e.withCredentials||p(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;P&&(u[e.xsrfHeaderName]=P)}if('setRequestHeader'in f&&n.forEach(u,function(e,t){'undefined'==typeof h&&'content-type'===t.toLowerCase()?delete u[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if('json'!==f.responseType)throw t}'function'==typeof e.onDownloadProgress&&f.addEventListener('progress',e.onDownloadProgress),'function'==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener('progress',e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),c(e),f=null)}),void 0===h&&(h=null),f.send(h)})}}).call(t,o(11))},function(e){'use strict';function t(e){this.message=e}t.prototype.toString=function(){return'Cancel'+(this.message?': '+this.message:'')},t.prototype.__CANCEL__=!0,e.exports=t},function(e){'use strict';e.exports=function(e){return!!(e&&e.__CANCEL__)}},function(e,t,o){'use strict';var n=o(25);e.exports=function(e,t,o,r){var a=new Error(e);return n(a,t,o,r)}},function(e){'use strict';e.exports=function(e,t){return function(){for(var o=Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];return e.apply(t,o)}}},function(e,t,o){function n(e){return null===e||e===void 0}function r(e){return e&&'object'==typeof e&&'number'==typeof e.length&&('function'!=typeof e.copy||'function'!=typeof e.slice?!1:0<e.length&&'number'!=typeof e[0]?!1:!0)}function a(e,t,o){var c,i;if(n(e)||n(t))return!1;if(e.prototype!==t.prototype)return!1;if(d(e))return!!d(t)&&(e=s.call(e),t=s.call(t),l(e,t,o));if(r(e)){if(!r(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var h=p(e),u=p(t)}catch(t){return!1}if(h.length!=u.length)return!1;for(h.sort(),u.sort(),c=h.length-1;0<=c;c--)if(h[c]!=u[c])return!1;for(c=h.length-1;0<=c;c--)if(i=h[c],!l(e[i],t[i],o))return!1;return typeof e==typeof t}var s=Array.prototype.slice,p=o(38),d=o(37),l=e.exports=function(e,t,o){return o||(o={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e&&t&&('object'==typeof e||'object'==typeof t)?a(e,t,o):o.strict?e===t:e==t)}},function(e,t,o){function n(e,t){if(''==t)return e;var o={op:'_get',path:t};return r(e,o),o.value}function r(e,o,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!0),r&&('function'==typeof r?r(o,0,e,o.path):s(o,0)),''===o.path){var p={newDocument:e};if('add'===o.op)return p.newDocument=o.value,p;if('replace'===o.op)return p.newDocument=o.value,p.removed=e,p;if('move'===o.op||'copy'===o.op)return p.newDocument=n(e,o.from),'move'===o.op&&(p.removed=e),p;if('test'===o.op){if(p.test=l(e,o.value),!1===p.test)throw new t.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,o,e);return p.newDocument=e,p}if('remove'===o.op)return p.removed=e,p.newDocument=null,p;if('_get'===o.op)return o.value=e,p;if(r)throw new t.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902','OPERATION_OP_INVALID',0,o,e);else return p}else{a||(e=c._deepClone(e));var i,d,f,m=o.path||'',y=m.split('/'),g=e,b=1,v=y.length;for(f='function'==typeof r?r:s;;){if(d=y[b],r&&void 0==i&&(void 0===g[d]?i=y.slice(0,b).join('/'):b==v-1&&(i=o.path),void 0!==i&&f(o,0,e,i)),b++,Array.isArray(g)){if('-'===d)d=g.length;else{if(r&&!c.isInteger(d))throw new t.JsonPatchError('Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index','OPERATION_PATH_ILLEGAL_ARRAY_INDEX',0,o.path,o);d=~~d}if(b>=v){if(r&&'add'===o.op&&d>g.length)throw new t.JsonPatchError('The specified index MUST NOT be greater than the number of elements in the array','OPERATION_VALUE_OUT_OF_BOUNDS',0,o.path,o);var p=u[o.op].call(o,g,d,e);if(!1===p.test)throw new t.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,o,e);return p}}else if(d&&-1!=d.indexOf('~')&&(d=c.unescapePathComponent(d)),b>=v){var p=h[o.op].call(o,g,d,e);if(!1===p.test)throw new t.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,o,e);return p}g=g[d]}}}function a(e,t,o){for(var n=Array(t.length),a=0,s=t.length;a<s;a++)n[a]=r(e,t[a],o),e=n[a].newDocument;return n.newDocument=e,n}function s(e,o,n,r){if('object'!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError('Operation is not an object','OPERATION_NOT_AN_OBJECT',o,e,n);else if(!h[e.op])throw new t.JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902','OPERATION_OP_INVALID',o,e,n);else if('string'!=typeof e.path)throw new t.JsonPatchError('Operation `path` property is not a string','OPERATION_PATH_INVALID',o,e,n);else if(0!==e.path.indexOf('/')&&0<e.path.length)throw new t.JsonPatchError('Operation `path` property must start with "/"','OPERATION_PATH_INVALID',o,e,n);else if(('move'===e.op||'copy'===e.op)&&'string'!=typeof e.from)throw new t.JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)','OPERATION_FROM_REQUIRED',o,e,n);else if(('add'===e.op||'replace'===e.op||'test'===e.op)&&e.value===void 0)throw new t.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)','OPERATION_VALUE_REQUIRED',o,e,n);else if(('add'===e.op||'replace'===e.op||'test'===e.op)&&c.hasUndefined(e.value))throw new t.JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)','OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED',o,e,n);else if(n)if('add'==e.op){var a=e.path.split('/').length,s=r.split('/').length;if(a!==s+1&&a!==s)throw new t.JsonPatchError('Cannot perform an `add` operation at the desired path','OPERATION_PATH_CANNOT_ADD',o,e,n)}else if('replace'===e.op||'remove'===e.op||'_get'===e.op){if(e.path!==r)throw new t.JsonPatchError('Cannot perform the operation at a path that does not exist','OPERATION_PATH_UNRESOLVABLE',o,e,n);}else if('move'===e.op||'copy'===e.op){var i={op:'_get',path:e.from,value:void 0},d=p([i],n);if(d&&'OPERATION_PATH_UNRESOLVABLE'===d.name)throw new t.JsonPatchError('Cannot perform the operation from a path that does not exist','OPERATION_FROM_UNRESOLVABLE',o,e,n)}}function p(e,o,n){try{if(!Array.isArray(e))throw new t.JsonPatchError('Patch sequence must be an array','SEQUENCE_NOT_AN_ARRAY');if(o)a(c._deepClone(o),c._deepClone(e),n||!0);else{n=n||s;for(var r=0;r<e.length;r++)n(e[r],r,o,void 0)}}catch(o){if(o instanceof t.JsonPatchError)return o;throw o}}var i={strict:!0},d=o(9),l=function(e,t){return d(e,t,i)},c=o(3);t.JsonPatchError=c.PatchError,t.deepClone=c._deepClone;var h={add:function(e,t,o){return e[t]=this.value,{newDocument:o}},remove:function(e,t,o){var n=e[t];return delete e[t],{newDocument:o,removed:n}},replace:function(e,t,o){var n=e[t];return e[t]=this.value,{newDocument:o,removed:n}},move:function(e,t,o){var a=n(o,this.path);a&&(a=c._deepClone(a));var s=r(o,{op:'remove',path:this.from}).removed;return r(o,{op:'add',path:this.path,value:s}),{newDocument:o,removed:a}},copy:function(e,t,o){var a=n(o,this.from);return r(o,{op:'add',path:this.path,value:c._deepClone(a)}),{newDocument:o}},test:function(e,t,o){return{newDocument:o,test:l(e[t],this.value)}},_get:function(e,t,o){return this.value=e[t],{newDocument:o}}},u={add:function(e,t,o){return e.splice(t,0,this.value),{newDocument:o,index:t}},remove:function(e,t,o){var n=e.splice(t,1);return{newDocument:o,removed:n[0]}},replace:function(e,t,o){var n=e[t];return e[t]=this.value,{newDocument:o,removed:n}},move:h.move,copy:h.copy,test:h.test,_get:h._get};t.getValueByPointer=n,t.applyOperation=r,t.applyPatch=a,t.applyReducer=function(e,o){var n=r(e,o);if(!1===n.test)throw new t.JsonPatchError('Test operation failed','TEST_OPERATION_FAILED',0,o,e);return n.newDocument},t.validator=s,t.validate=p},function(e){function t(){throw new Error('setTimeout has not been defined')}function o(){throw new Error('clearTimeout has not been defined')}function n(e){if(d===setTimeout)return setTimeout(e,0);if((d===t||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function r(e){if(l===clearTimeout)return clearTimeout(e);if((l===o||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){f&&h&&(f=!1,h.length?u=h.concat(u):m=-1,u.length&&s())}function s(){if(!f){var e=n(a);f=!0;for(var t=u.length;t;){for(h=u,u=[];++m<t;)h&&h[m].run();m=-1,t=u.length}h=null,f=!1,r(e)}}function p(e,t){this.fun=e,this.array=t}function i(){}var d,l,c=e.exports={};(function(){try{d='function'==typeof setTimeout?setTimeout:t}catch(o){d=t}try{l='function'==typeof clearTimeout?clearTimeout:o}catch(t){l=o}})();var h,u=[],f=!1,m=-1;c.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];u.push(new p(e,t)),1!==u.length||f||n(s)},p.prototype.run=function(){this.fun.apply(null,this.array)},c.title='browser',c.browser=!0,c.env={},c.argv=[],c.version='',c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.prependListener=i,c.prependOnceListener=i,c.listeners=function(){return[]},c.binding=function(){throw new Error('process.binding is not supported')},c.cwd=function(){return'/'},c.chdir=function(){throw new Error('process.chdir is not supported')},c.umask=function(){return 0}},function(e,t,o){e.exports=o(20)},function(e,t,o){function n(e){for(var t=0,o=f.length;t<o;t++)if(f[t].obj===e)return f[t]}function r(e,t){for(var o=0,n=e.observers.length;o<n;o++)if(e.observers[o].callback===t)return e.observers[o].observer}function a(e,t){for(var o=0,n=e.observers.length;o<n;o++)if(e.observers[o].observer===t)return void e.observers.splice(o,1)}function s(e){for(var t,o=0,n=f.length;o<n;o++)if(f[o].obj===e.object){t=f[o];break}p(t.value,e.object,e.patches,''),e.patches.length&&c.applyPatch(t.value,e.patches);var r=e.patches;return 0<r.length&&(e.patches=[],e.callback&&e.callback(r)),r}function p(e,o,n,r){if(o!==e){'function'==typeof o.toJSON&&(o=o.toJSON());for(var a=l._objectKeys(o),s=l._objectKeys(e),i=!1,d=!1,c=s.length-1;0<=c;c--){var t=s[c],h=e[t];if(l.hasOwnProperty(o,t)&&(void 0!==o[t]||void 0===h||!1!==Array.isArray(o))){var u=o[t];'object'==typeof h&&null!=h&&'object'==typeof u&&null!=u?p(h,u,n,r+'/'+l.escapePathComponent(t)):h!==u&&(i=!0,n.push({op:'replace',path:r+'/'+l.escapePathComponent(t),value:l._deepClone(u)}))}else n.push({op:'remove',path:r+'/'+l.escapePathComponent(t)}),d=!0}if(d||a.length!=s.length)for(var t,c=0;c<a.length;c++)t=a[c],l.hasOwnProperty(e,t)||void 0===o[t]||n.push({op:'add',path:r+'/'+l.escapePathComponent(t),value:l._deepClone(o[t])})}}var i={strict:!0},d=o(9),l=o(3),c=o(10),h=o(10);t.applyOperation=h.applyOperation,t.applyPatch=h.applyPatch,t.applyReducer=h.applyReducer,t.getValueByPointer=h.getValueByPointer,t.validate=h.validate,t.validator=h.validator;var u=o(3);t.JsonPatchError=u.PatchError,t.deepClone=u._deepClone,t.escapePathComponent=u.escapePathComponent,t.unescapePathComponent=u.unescapePathComponent;var f=[],m=function(){return function(e){this.observers=[],this.obj=e}}(),y=function(){return function(e,t){this.callback=e,this.observer=t}}();t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var o,p=n(e);if(p?o=r(p,t):(p=new m(e),f.push(p)),o)return o;if(o={},p.value=l._deepClone(e),t){o.callback=t,o.next=null;var i=function(){s(o)},d=function(){clearTimeout(o.next),o.next=setTimeout(i)};'undefined'!=typeof window&&(window.addEventListener?(window.addEventListener('mouseup',d),window.addEventListener('keyup',d),window.addEventListener('mousedown',d),window.addEventListener('keydown',d),window.addEventListener('change',d)):(document.documentElement.attachEvent('onmouseup',d),document.documentElement.attachEvent('onkeyup',d),document.documentElement.attachEvent('onmousedown',d),document.documentElement.attachEvent('onkeydown',d),document.documentElement.attachEvent('onchange',d)))}return o.patches=[],o.object=e,o.unobserve=function(){s(o),clearTimeout(o.next),a(p,o),'undefined'!=typeof window&&(window.removeEventListener?(window.removeEventListener('mouseup',d),window.removeEventListener('keyup',d),window.removeEventListener('mousedown',d),window.removeEventListener('keydown',d)):(document.documentElement.detachEvent('onmouseup',d),document.documentElement.detachEvent('onkeyup',d),document.documentElement.detachEvent('onmousedown',d),document.documentElement.detachEvent('onkeydown',d)))},p.observers.push(new y(t,o)),o},t.generate=s,t.compare=function(e,t){var o=[];return p(e,t,o,''),o}},function(e,t,o){if('undefined'==typeof n)var n=o(1).JSONPatchQueue;var r=function(e,t,o,r){n.call(this,t,o,r),this.transform=e,this.pending=[]};r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype.ackLocalVersion=0,r.prototype.send=function(e){var t=e.slice(0);t.unshift({op:'test',path:this.remotePath,value:this.remoteVersion});var o=n.prototype.send.call(this,t);return this.pending.push(o),o},r.prototype.receive=function(e,t,o){var r=o||this.apply,a=this;return n.prototype.receive.call(this,e,t,function(e,t){var o=t.slice(0),n=o.shift().value,s=n-a.ackLocalVersion;a.ackLocalVersion=n,a.pending.splice(0,s),a.pending.length&&(o=a.transform(o,a.pending)),r(e,o)})},r.prototype.reset=function(e,t){this.ackLocalVersion=n.getPropertyByJsonPointer(t,this.localPath),this.pending=[],n.prototype.reset.call(this,e,t)},e.exports=r,e.exports.default=r,e.exports.__esModule=!0},function(e){var t=function(){function e(e,o,n){var r=e.substr(o.length),a=r.indexOf('/');-1<a||(a=r.length);var s=r.substr(0,a),p=r.substr(a);return t(s)&&s>n?o+(s-1)+p:e}function t(e){var t=~~+e;return t+''===e&&0<=t}var o=!1,n=n||{};n.transform=function(e,t){var o=[];o=o.concat.apply(o,t);var n=JSON.parse(JSON.stringify(e)),a=o.reduce(r,n);return a},n.transformAgainstSingleOp=function(){};var r=function(e,t){if(t.value===void 0&&('add'===t.op||'replace'===t.op||'test'===t.op))throw new Error('\'value\' MUST be defined');if(void 0===t.from&&('copy'===t.op||'move'===t.op))throw new Error('\'from\' MUST be defined');if(!a[t.op]);else if('function'==typeof a[t.op])a[t.op](t,e);else for(var o,n=e.length,r=0;r<n;)o=e[r],r++,!a[t.op][o.op]||a[t.op][o.op](t,o);return e},a={remove:function(n,r){for(var a,s=r.length,p=0;a=r[p];)o,('add'===a.op||'test'===a.op)&&n.path===a.path||(a.from&&(a.from===n.path||0===a.from.indexOf(n.path+'/'))||n.path===a.path||0===a.path.indexOf(n.path+'/'))&&(o,r.splice(p,1),s--,p--),p++;var i=n.path.lastIndexOf('/');if(-1<i){var d=n.path.substr(i+1),l=n.path.substr(0,i+1);if(t(d))for(o,o,s=r.length,p=0;p<s;)a=r[p],p++,0===a.path.indexOf(l)&&(a.path=e(a.path,l,d)),a.from&&0===a.from.indexOf(l)&&(a.from=e(a.from,l,d))}},replace:function(e,t){for(var n,r=0;n=t[r];)o,(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+'/'))||0===n.path.indexOf(e.path+'/'))&&(o,t.splice(r,1),r--),r++}};return n}();e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e){const t=function(){function e(e,t){'boolean'!=typeof t&&(t=!0),this.showDetachedWarning=t,this.originalObject=e,this.cachedProxy=null,this.isRecording=!1,this.userCallback,this.resume=()=>{this.defaultCallback=(e)=>{this.isRecording&&this.patches.push(e),this.userCallback&&this.userCallback(e)}},this.pause=()=>{this.defaultCallback=function(){}}}const t=new Map;return e.deepClone=function(e){switch(typeof e){case'object':return JSON.parse(JSON.stringify(e));case'undefined':return null;default:return e;}},e.escapePathComponent=function(e){return-1===e.indexOf('/')&&-1===e.indexOf('~')?e:e.replace(/~/g,'~0').replace(/\//g,'~1')},e.prototype.generateProxyAtPath=function(o,n){if(!o)return o;const r=this,a={get:function(e,t,o){return'_isProxified'===t.toString()||Reflect.get(e,t,o)},set:function(t,o,a){const s=n+'/'+e.escapePathComponent(o.toString());if(a&&'object'==typeof a&&!0!==a._isProxified&&(a=r._proxifyObjectTreeRecursively(a,s)),'undefined'==typeof a){if(t.hasOwnProperty(o))return Array.isArray(t)?r.defaultCallback({op:'replace',path:s,value:null}):r.defaultCallback({op:'remove',path:s}),Reflect.set(t,o,a);if(!Array.isArray(t))return Reflect.set(t,o,a)}return Array.isArray(t)&&!Number.isInteger(+o.toString())?Reflect.set(t,o,a):t.hasOwnProperty(o)?'undefined'==typeof t[o]?(Array.isArray(t)?r.defaultCallback({op:'replace',path:s,value:a}):r.defaultCallback({op:'add',path:s,value:a}),Reflect.set(t,o,a)):(r.defaultCallback({op:'replace',path:s,value:a}),Reflect.set(t,o,a)):(r.defaultCallback({op:'add',path:s,value:a}),Reflect.set(t,o,a))},deleteProperty:function(o,a){if('undefined'!=typeof o[a]){r.defaultCallback({op:'remove',path:n+'/'+e.escapePathComponent(a.toString())});const s=t.get(o[a]);s&&r.disableTrapsForProxy(s)}return Reflect.deleteProperty(o,a)}},s=Proxy.revocable(o,a);return s.trapsInstance=a,t.set(s.proxy,s),s.proxy},e.prototype._proxifyObjectTreeRecursively=function(t,o){for(let n in t)if(t.hasOwnProperty(n)&&'object'==typeof t[n]){const r=o+'/'+e.escapePathComponent(n);t[n]=this.generateProxyAtPath(t[n],r),this._proxifyObjectTreeRecursively(t[n],r)}return this.generateProxyAtPath(t,o)},e.prototype.proxifyObjectTree=function(e){this.pause();const t=this._proxifyObjectTreeRecursively(e,'');return this.resume(),t},e.prototype.disableTrapsForProxy=function(e){if(this.showDetachedWarning){const t='You\'re accessing an object that is detached from the observedObject tree, see https://github.com/Palindrom/JSONPatcherProxy#detached-objects';e.trapsInstance.get=(e,o,n)=>{return console.warn(t),Reflect.get(e,o,n)},e.trapsInstance.set=(e,o,n)=>{return console.warn(t),Reflect.set(e,o,n)},e.trapsInstance.deleteProperty=(e,o,n)=>{return console.warn(t),Reflect.deleteProperty(e,o,n)}}else delete e.trapsInstance.set,delete e.trapsInstance.get,delete e.trapsInstance.deleteProperty},e.prototype.observe=function(t,o){if(!t&&!o)throw new Error('You need to either record changes or pass a callback');return this.isRecording=t,o&&(this.userCallback=o),t&&(this.patches=[]),this.cachedProxy=this.proxifyObjectTree(e.deepClone(this.originalObject))},e.prototype.generate=function(){if(!this.isRecording)throw new Error('You should set record to true to get patches later');return this.patches.splice(0,this.patches.length)},e.prototype.revoke=function(){t.forEach((e)=>e.revoke())},e.prototype.disableTraps=function(){t.forEach(this.disableTrapsForProxy,this)},e}();e.exports=t,e.exports.default=t},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'==typeof window&&(t=window)}e.exports=t},function(e){e.exports=URL},function(e){e.exports=WebSocket},function(e,t,o){'use strict';function n(e){var t=new s(e),o=a(s.prototype.request,t);return r.extend(o,s.prototype,t),r.extend(o,t),o}var r=o(0),a=o(8),s=o(22),p=o(2),i=n(p);i.Axios=s,i.create=function(e){return n(r.merge(p,e))},i.Cancel=o(5),i.CancelToken=o(21),i.isCancel=o(6),i.all=function(e){return Promise.all(e)},i.spread=o(36),e.exports=i,e.exports.default=i},function(e,t,o){'use strict';function n(e){if('function'!=typeof e)throw new TypeError('executor must be a function.');var t;this.promise=new Promise(function(e){t=e});var o=this;e(function(e){o.reason||(o.reason=new r(e),t(o.reason))})}var r=o(5);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e,t=new n(function(t){e=t});return{token:t,cancel:e}},e.exports=n},function(e,t,o){'use strict';function n(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var r=o(2),a=o(0),s=o(23),p=o(24),i=o(32),d=o(30);n.prototype.request=function(e){'string'==typeof e&&(e=a.merge({url:arguments[0]},arguments[1])),e=a.merge(r,this.defaults,{method:'get'},e),e.baseURL&&!i(e.url)&&(e.url=d(e.baseURL,e.url));var t=[p,void 0],o=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)o=o.then(t.shift(),t.shift());return o},a.forEach(['delete','get','head'],function(e){n.prototype[e]=function(t,o){return this.request(a.merge(o||{},{method:e,url:t}))}}),a.forEach(['post','put','patch'],function(e){n.prototype[e]=function(t,o,n){return this.request(a.merge(n||{},{method:e,url:t,data:o}))}}),e.exports=n},function(e,t,o){'use strict';function n(){this.handlers=[]}var r=o(0);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,o){'use strict';function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var r=o(0),a=o(27),s=o(6),p=o(2);e.exports=function(e){n(e),e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(['delete','get','head','post','put','patch','common'],function(t){delete e.headers[t]});var t=e.adapter||p.adapter;return t(e).then(function(t){return n(e),t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(n(e),t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e){'use strict';e.exports=function(e,t,o,n){return e.config=t,o&&(e.code=o),e.response=n,e}},function(e,t,o){'use strict';var n=o(7);e.exports=function(e,t,o){var r=o.config.validateStatus;o.status&&r&&!r(o.status)?t(n('Request failed with status code '+o.status,o.config,null,o)):e(o)}},function(e,t,o){'use strict';var n=o(0);e.exports=function(e,t,o){return n.forEach(o,function(o){e=o(e,t)}),e}},function(e){'use strict';function t(){this.message='String contains an invalid character'}t.prototype=new Error,t.prototype.code=5,t.prototype.name='InvalidCharacterError',e.exports=function(e){for(var o,n,r=e+'',a='',s=0,p='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';r.charAt(0|s)||(p='=',s%1);a+=p.charAt(63&o>>8-8*(s%1))){if(n=r.charCodeAt(s+=3/4),255<n)throw new t;o=o<<8|n}return a}},function(e,t,o){'use strict';function n(e){return encodeURIComponent(e).replace(/%40/gi,'@').replace(/%3A/gi,':').replace(/%24/g,'$').replace(/%2C/gi,',').replace(/%20/g,'+').replace(/%5B/gi,'[').replace(/%5D/gi,']')}var r=o(0);e.exports=function(e,t,o){if(!t)return e;var a;if(o)a=o(t);else if(r.isURLSearchParams(t))a=t.toString();else{var s=[];r.forEach(t,function(e,t){null===e||'undefined'==typeof e||(r.isArray(e)&&(t+='[]'),!r.isArray(e)&&(e=[e]),r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+'='+n(e))}))}),a=s.join('&')}return a&&(e+=(-1===e.indexOf('?')?'?':'&')+a),e}},function(e){'use strict';e.exports=function(e,t){return e.replace(/\/+$/,'')+'/'+t.replace(/^\/+/,'')}},function(e,t,o){'use strict';var n=o(0);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,o,r,a,s){var p=[];p.push(e+'='+encodeURIComponent(t)),n.isNumber(o)&&p.push('expires='+new Date(o).toGMTString()),n.isString(r)&&p.push('path='+r),n.isString(a)&&p.push('domain='+a),!0===s&&p.push('secure'),document.cookie=p.join('; ')},read:function(e){var t=document.cookie.match(new RegExp('(^|;\\s*)('+e+')=([^;]*)'));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,'',Date.now()-8.64e7)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e){'use strict';e.exports=function(e){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,o){'use strict';var n=o(0);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return o&&(r.setAttribute('href',t),t=r.href),r.setAttribute('href',t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,''):'',host:r.host,search:r.search?r.search.replace(/^\?/,''):'',hash:r.hash?r.hash.replace(/^#/,''):'',hostname:r.hostname,port:r.port,pathname:'/'===r.pathname.charAt(0)?r.pathname:'/'+r.pathname}}var t,o=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement('a');return t=e(window.location.href),function(o){var r=n.isString(o)?e(o):o;return r.protocol===t.protocol&&r.host===t.host}}():function(){return function(){return!0}}()},function(e,t,o){'use strict';var n=o(0);e.exports=function(e,t){n.forEach(e,function(o,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[n])})}},function(e,t,o){'use strict';var n=o(0);e.exports=function(e){var t,o,r,a={};return e?(n.forEach(e.split('\n'),function(e){r=e.indexOf(':'),t=n.trim(e.substr(0,r)).toLowerCase(),o=n.trim(e.substr(r+1)),t&&(a[t]=a[t]?a[t]+', '+o:o)}),a):a}},function(e){'use strict';e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){function o(e){return'[object Arguments]'==Object.prototype.toString.call(e)}function n(e){return e&&'object'==typeof e&&'number'==typeof e.length&&Object.prototype.hasOwnProperty.call(e,'callee')&&!Object.prototype.propertyIsEnumerable.call(e,'callee')||!1}var r='[object Arguments]'==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=r?o:n,t.supported=o;t.unsupported=n},function(e,t){function o(e){var t=[];for(var o in e)t.push(o);return t}t=e.exports='function'==typeof Object.keys?Object.keys:o,t.shim=o},function(e){var t=function(e,t,o){this.waiting=[],this.versionPath=e,this.apply=t,this.purist=o};t.prototype.version=0,t.prototype.receive=function(e,t,o){var n=o||this.apply,r=t.slice(0);if(this.purist)r.shift();var a=r.shift(),s=a.value;if(s<=this.version)throw new Error('Given version was already applied.');else if(s==this.version+1)for(;r;)this.version++,n(e,r),r=this.waiting.shift();else this.waiting[s-this.version-2]=r},t.prototype.send=function(e){this.version++;var t=e.slice(0);return t.unshift({op:'replace',path:this.versionPath,value:this.version}),this.purist&&t.unshift({op:'test',path:this.versionPath,value:this.version-1}),t},t.getPropertyByJsonPointer=function(e,t){var o=t.split('/');''===o[0]&&o.shift();for(var n=e;o.length;){var r=o.shift().replace('~1','/').replace('~0','~');o.length&&(n=n[r])}return n[r]},t.prototype.reset=function(e,o){this.version=t.getPropertyByJsonPointer(o,this.versionPath),this.waiting=[];this.apply(e,[{op:'replace',path:'',value:o}])},e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e){var t=function(e,t,o){this.waiting=[],this.localPath=e[0],this.remotePath=e[1],this.apply=t,this.purist=o};t.prototype.localVersion=0,t.prototype.remoteVersion=0,t.prototype.receive=function(e,t,o){var n=o||this.apply,r=t.slice(0);if(this.purist)r.shift();var a=r.shift(),s=a.value;if(s<=this.remoteVersion)throw new Error('Given version was already applied.');else if(s==this.remoteVersion+1)for(;r;)this.remoteVersion++,n(e,r),r=this.waiting.shift();else this.waiting[s-this.remoteVersion-2]=r},t.prototype.send=function(e){this.localVersion++;var t=e.slice(0);return this.purist?t.unshift({op:'test',path:this.localPath,value:this.localVersion-1},{op:'replace',path:this.localPath,value:this.localVersion}):t.unshift({op:'replace',path:this.localPath,value:this.localVersion}),t},t.getPropertyByJsonPointer=function(e,t){var o=t.split('/');''===o[0]&&o.shift();for(var n=e;o.length;){var r=o.shift().replace('~1','/').replace('~0','~');o.length&&(n=n[r])}return n[r]},t.prototype.reset=function(e,o){this.remoteVersion=t.getPropertyByJsonPointer(o,this.remotePath),this.waiting=[];this.apply(e,[{op:'replace',path:'',value:o}])},e.exports=t,e.exports.default=t,e.exports.__esModule=!0},function(e,t,o){(function(t){var{applyPatch:n,validate:r}=o(13),a=o(16),s=o(1).JSONPatchQueueSynchronous,p=o(1).JSONPatchQueue,i=o(15),d=o(14),l=o(18),c=o(12),h=o(19).w3cwebsocket;if(!t.WebSocket&&h)var u=h;else if(t.WebSocket)var u=t.WebSocket;var f=function(){function e(e){return e.replace(/^http/i,'ws')}function t(e,t,o){function n(){r=i,a=0,s=!1,clearTimeout(p),p=null}var r,a,s,p,i=1e3,d=function(){0==a?(t(0),s=!1,r*=2,e()):(t(a),a-=1e3,setTimeout(d,1e3))};this.triggerReconnection=function(){s||(a=r,s=!0,d())},this.reconnectNow=function(){a=0,r=i},this.stopReconnecting=function(){n(),o()},n()}function o(e,t,o,n){var r,a;this.start=function(){r||(r=setTimeout(function(){this.notifySend(),e()}.bind(this),o))},this.notifySend=function(){clearTimeout(r),r=null,a||(a=setTimeout(function(){a=null,t()}.bind(this),n))},this.notifyReceive=function(){clearTimeout(a),a=null,this.start()},this.stop=function(){clearTimeout(r),r=null,clearTimeout(a),a=null}}function h(){this.start=this.stop=this.notifySend=this.notifyReceive=function(){}}function f(t,o,n,r,a,s,p,i){this.palindrom=t,this.remoteUrl='undefined'!=typeof window&&window.location?new l(o,window.location.href):new l(o),r&&(this.onReceive=r),a&&(this.onSend=a),s&&(this.onConnectionError=s),p&&(this.onFatalError=p),i&&(this.onStateChange=i);var d=this;Object.defineProperty(this,'useWebSocket',{get:function(){return n},set:function(t){return n=t,!1==t?d._ws&&(d._ws.onclose=function(){d._ws=null},d._ws.close()):!d.wsUrl&&(d.wsUrl=e(d.remoteUrl.href)),n}})}function m(e,t,o,n){return e.xhr(t,'application/json',o,function(t){n(t.data),e.useWebSocket&&e.webSocketUpgrade()})}function y(e){e._ws&&(e._ws.onclose=function(){},e._ws.close(),e._ws=null)}function g(e){this.apply=e}function b(e,t){e.heartbeat.stop(),t(function(t){e.reconnector.stopReconnecting(),e.debug&&(e.remoteObj=JSON.parse(JSON.stringify(t))),e.queue.reset(e.obj,t),e.heartbeat.start()})}function v(e){b(e,e.network.establish.bind(e.network))}function P(e){b(e,function(t){e.network.reestablish(e.queue.pending,t)})}function E(e){if('object'!=typeof e)throw new Error('Palindrom constructor requires an object argument.');if(!e.remoteUrl)throw new Error('remoteUrl is required');if(e.ignoreAdd)throw new TypeError('Palindrom: `ignoreAdd` is removed in favour of local state objects. see https://github.com/Palindrom/Palindrom/issues/136');Object.defineProperty(this,'ignoreAdd',{set:function(){throw new TypeError('Palindrom: Can\'t set `ignoreAdd`, it is removed in favour of local state objects. see https://github.com/Palindrom/Palindrom/issues/136')}}),this.debug=void 0==e.debug||e.debug;var n=function(){};if(this.isObserving=!1,this.onLocalChange=e.onLocalChange||n,this.onRemoteChange=e.onRemoteChange||n,this.onStateReset=e.onStateReset||e.callback||n,e.callback&&console.warn('Palindrom: options.callback is deprecated. Please use `onStateReset` instead'),this.onPatchReceived=e.onPatchReceived||n,this.onPatchSent=e.onPatchSent||n,this.onSocketStateChanged=e.onSocketStateChanged||n,this.onConnectionError=e.onConnectionError||n,this.retransmissionThreshold=e.retransmissionThreshold||3,this.onReconnectionCountdown=e.onReconnectionCountdown||n,this.onReconnectionEnd=e.onReconnectionEnd||n,this.onIncomingPatchValidationError=e.onIncomingPatchValidationError||n,this.onOutgoingPatchValidationError=e.onOutgoingPatchValidationError||n,this.reconnector=new t(function(){P(this)}.bind(this),this.onReconnectionCountdown,this.onReconnectionEnd),e.pingIntervalS){const t=1e3*e.pingIntervalS;this.heartbeat=new o(this.ping.bind(this),this.handleConnectionError.bind(this),t,t)}else this.heartbeat=new h;this.network=new f(this,e.remoteUrl,e.useWebSocket||!1,this.handleRemoteChange.bind(this),this.onPatchSent.bind(this),this.handleConnectionError.bind(this),this.handleFatalError.bind(this),this.onSocketStateChanged.bind(this)),Object.defineProperty(this,'useWebSocket',{get:function(){return this.network.useWebSocket},set:function(e){this.network.useWebSocket=e}}),this.queue=e.localVersionPath?e.remoteVersionPath?e.ot?new d(i.transform,[e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):new p([e.localVersionPath,e.remoteVersionPath],this.validateAndApplySequence.bind(this),e.purity):new s(e.localVersionPath,this.validateAndApplySequence.bind(this),e.purity):new g(this.validateAndApplySequence.bind(this)),v(this)}function w(e,t){var o=JSON.stringify(t);e.unobserve(),e.heartbeat.notifySend(),e.network.send(o),e.observe()}if('undefined'==typeof x)if('undefined'!=typeof window)var x=window;else var x={};return f.prototype.establish=function(e){m(this,this.remoteUrl.href,null,e)},f.prototype.reestablish=function(e,t){m(this,this.remoteUrl.href+'/reconnect',JSON.stringify(e),t)},f.prototype.send=function(e){var t=this;if(this.useWebSocket&&this._ws&&1===this._ws.readyState)this._ws.send(e),t.onSend(e,t._ws.url,'WS');else{var o=this.remoteUrl.href;this.xhr(o,'application/json-patch+json',e,function(e,n){t.onReceive(e.data,o,n)})}return this},f.prototype.onReceive=function(){},f.prototype.onSend=function(){},f.prototype.onStateChange=function(){},f.prototype.upgrade=function(){},f.prototype.webSocketUpgrade=function(t){var o=this;this.wsUrl=e(this.remoteUrl.href);var n=this.wsUrl;y(o),o._ws=new u(n),o._ws.onopen=function(e){o.onStateChange(o._ws.readyState,n),t&&t(e)},o._ws.onmessage=function(e){o.onReceive(JSON.parse(e.data),o._ws.url,'WS')},o._ws.onerror=function(e){if(o.onStateChange(o._ws.readyState,n,e.data),!!o.useWebSocket){var t={statusText:'WebSocket connection could not be made.',readyState:o._ws.readyState,url:n};o.onFatalError(t,n,'WS')}},o._ws.onclose=function(e){o.onStateChange(o._ws.readyState,n,null,e.code,e.reason);var t={statusText:'WebSocket connection closed.',readyState:o._ws.readyState,url:n,statusCode:e.code,reason:e.reason};e.reason?o.onFatalError(t,n,'WS'):o.onConnectionError()}},f.prototype.getPatchUsingHTTP=function(e){var t=this;return this.xhr(e,'application/json-patch+json',null,function(o,n){t.onReceive(o.data,e,n)},!0)},f.prototype.changeState=function(e){return console.warn('Palindrom: changeState was renamed to `getPatchUsingHTTP`, and they\'re both not recommended to use, please use `PalindromDOM.morphUrl` instead'),this.getPatchUsingHTTP(e)},f.prototype.setRemoteUrl=function(e){if(this.remoteUrlSet&&this.remoteUrl&&this.remoteUrl!=e)throw new Error('Session lost. Server replied with a different session ID that was already set. \nPossibly a server restart happened while you were working. \nPlease reload the page.\n\nPrevious session ID: '+this.remoteUrl+'\nNew session ID: '+e);this.remoteUrlSet=!0,this.remoteUrl=new l(e,this.remoteUrl.href)},f.prototype.handleResponseHeader=function(e){var t=e.headers['x-location']||e.headers.location;t&&this.setRemoteUrl(t)},f.prototype.xhr=function(e,t,o,n,r){const a=o?'PATCH':'GET',s={},p=this;var i;o&&(s['Content-Type']='application/json-patch+json'),t&&(s.Accept=t),this.remoteUrl&&r&&(s['X-Referer']=this.remoteUrl.pathname),i='GET'==a?c.get(e,{headers:s}):c.patch(e,o,{headers:s}),i.then(function(e){p.handleResponseHeader(e),n&&n.call(p.palindrom,e,a)}).catch(function(t){p.onFatalError({statusCode:t.status,statusText:t.statusText,reason:t.data},e,a)}),this.onSend(o,e,a)},g.prototype.send=function(e){return e},g.prototype.receive=function(e,t){this.apply(e,t)},g.prototype.reset=function(e,t){this.apply(e,[{op:'replace',path:'',value:t}])},E.prototype.ping=function(){w(this,[])},E.prototype.prepareProxifiedObject=function(e){e||(e={}),this.jsonPatcherProxy=new a(e);const t=this.jsonPatcherProxy.observe(!0,this.filterChangedCallback.bind(this));Object.defineProperty(this,'obj',{get:function(){return t},set:function(){throw new Error('palindrom.obj is readonly')},configurable:!0}),this.isObserving=!0},E.prototype.observe=function(){this.jsonPatcherProxy&&this.jsonPatcherProxy.resume(),this.isObserving=!0},E.prototype.unobserve=function(){this.jsonPatcherProxy&&this.jsonPatcherProxy.pause(),this.isObserving=!1},E.prototype.filterChangedCallback=function(e){var t=[e];t.length&&this.handleLocalChange(t)},E.prototype.handleLocalChange=function(e){this.debug&&this.validateSequence(this.remoteObj,e),w(this,this.queue.send(e)),this.onLocalChange(e)},E.prototype.validateAndApplySequence=function(e,t){try{this.unobserve();var o=n(e,t,this.debug);this.observe(),o.newDocument!==e&&(this.prepareProxifiedObject(o.newDocument),this.onStateReset(this.obj)),this.onRemoteChange(t,o)}catch(e){if(this.debug)return void this.onIncomingPatchValidationError(e);throw e}},E.prototype.validateSequence=function(e,t){var o=r(t,e);o&&this.onOutgoingPatchValidationError(o)},E.prototype.handleConnectionError=function(){this.heartbeat.stop(),this.reconnector.triggerReconnection()},E.prototype.handleFatalError=function(e,t,o){this.heartbeat.stop(),this.reconnector.stopReconnecting(),this.onConnectionError&&this.onConnectionError(e,t,o)},E.prototype.reconnectNow=function(){this.reconnector.reconnectNow()},E.prototype.showWarning=function(e,t){this.debug&&x.console&&console.warn&&(t&&(e+=' ('+t+')'),console.warn('Palindrom warning: '+e))},E.prototype.handleRemoteChange=function(e,t,o){this.heartbeat.notifyReceive();var n=e||[];0!==n.length&&(this.onPatchReceived&&this.onPatchReceived(e,t,o),this.isObserving&&(this.queue.receive(this.obj,n),this.queue.pending&&this.queue.pending.length&&this.queue.pending.length>this.retransmissionThreshold&&this.queue.pending.forEach(w.bind(null,this)),this.debug&&(this.remoteObj=JSON.parse(JSON.stringify(this.obj)))))},x.Puppet=E,E}();e.exports=f,e.exports.default=f,e.exports.__esModule=!0}).call(t,o(17))}]);