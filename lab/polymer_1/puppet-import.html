<dom-element is="puppet-import">
    <style></style>
    <template></template>
    <script>
        Polymer({
            html: null,
            oldModel: null,
            is: "puppet-import",
            ready: function () {
                var req = new XMLHttpRequest();
                var that = this;

                req.onload = function () {
                    that.html = this.responseText;
                    that.stampTemplate();
                };

                req.open("GET", this.content, true);
                req.send();
            },
            stampTemplate: function () {
                if (!this.html || !this.model) {
                    return;
                }

                if (this.oldModel == this.model && this.template) {
                    return;
                }

                if (this.template) {
                    this.root.innerHTML = "";
                    //Polymer.dom(this.parentNode).removeChild(this.template);
                }

                this.template = document.createElement('template', 'dom-bind');
                this.template.model = this.model;
                this.template.innerHTML = this.html;

                Polymer.dom(this.root).appendChild(this.template);
            },
            properties: {
                content: {
                    type: String,
                    value: null
                },
                model: {
                    type: Object,
                    value: null,
                    observer: "modelChanged"
                },
                path: {
                    type: String,
                    value: ""
                }
            },
            modelChanged: function (newValue, oldValue) {
                this.stampTemplate();
                this.oldModel = newValue;
            }
        });
    </script>
</dom-element>